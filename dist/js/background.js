let l=null,y=null,s=null,p=null;function b(n){var r,o,i,d,a,u,c,h,f;try{const e=JSON.parse(n.data);if(e.isJson){if(((i=(o=(r=e.response)==null?void 0:r.body)==null?void 0:o.children)==null?void 0:i.length)>0&&e.response.body.children[0].userCurrentDate){console.log(e.response.body.children[0].userCurrentDate);const t=e.response.body.children[0].userCurrentDate.text;l?l!==t&&(l=t,s=null):l=t}if(((u=(a=(d=e.response)==null?void 0:d.body)==null?void 0:a.children)==null?void 0:u.length)>0&&e.response.body.children[0].dayInfo){const t=e.response.body.children[0].dayInfo.filter(g=>g.date.text===l);t.length>0&&(y=t[0].formattedDateFull.value,p=t[0].totalForDay.value)}if(((f=(h=(c=e.response)==null?void 0:c.body)==null?void 0:h.children)==null?void 0:f.length)>0&&e.response.body.children[0].consolidatedList){console.log(e.response.body.children[0].consolidatedList);const t=e.response.body.children[0].consolidatedList.children;(!s||s.length<t.length)&&(s=t)}}e.url.includes("app_info/hash/widget_with_versions")&&console.log(e.response)}catch{console.error(n)}return!0}function D(n,r){if(n.data.action==="working_hours"){if(!l||!s||s.length===0)return r(null),!0;let o=s.filter(d=>d.date.text===l&&d.title.value==="Unmatched Check-in");if(o.length===0)return r(null),!0;const i=o[0];return r({data:{date:{value:l,formatted:y},totalForToday:p,difference:new Date(Date.now()).getTime()-new Date(`${i.date.value.Y}.${i.date.value.M}.${i.date.value.D}.${i.subtitle1.value}`).getTime()}}),!0}}chrome.runtime.onMessage.addListener((n,r,o)=>{if(n.type==="response")return b(n);n.type==="request"&&D(n,o)});chrome.runtime.onInstalled.addListener(()=>{chrome.action.setBadgeText({text:"ðŸ‘Œ"})});
